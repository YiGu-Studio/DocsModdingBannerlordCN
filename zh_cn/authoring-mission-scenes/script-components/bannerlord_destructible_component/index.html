<!DOCTYPE html>
<html>
  <head>
    <title>Taleworlds Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2020-11-18T02:08:41 UTC">
<title>Destructible Component :: Taleworlds Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "http:\/\/localhost:4444\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/zh_cn/authoring-mission-scenes/script-components/bannerlord_destructible_component/">
    
      <header>
  <div class="logo">
    
	
  
    <p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>

  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/zh_cn/" class="dd-item">
          <a href="/zh_cn/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/zh_cn/bestpractices/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/bestpractices/">Best Practices</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/bestpractices/scene_performance_guide/" class="dd-item">
        <div>
          <a href="/zh_cn/bestpractices/scene_performance_guide/">
            Scene Performance Guide
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/authoring-mission-scenes/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/zh_cn/authoring-mission-scenes/">编辑任务场景</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/villages/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/villages/">
            What Makes a Village Scene
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/tactical_positions/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/tactical_positions/">
            行动的战术位置
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/bannerlord_destructible_component/" class="dd-item active">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/bannerlord_destructible_component/">
            Destructible Component
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/scene_barrier_builder/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/scene_barrier_builder/">
            Scene Barrier Builder
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/scene_spawn_points_guide/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/scene_spawn_points_guide/">
            Scene Spawn Point Guide
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/spawn_point_debug_tool/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/spawn_point_debug_tool/">
            出生点 Debug 工具
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/callbacks/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/callbacks/">
            脚本组件回调函数
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/editor/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/editor/">编辑器</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/zh_cn/editor/scene-editor/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/editor/scene-editor/">场景编辑器</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/editor/scene-editor/creating_entity/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/creating_entity/">
            Creating Entity
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/nav_mesh/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/nav_mesh/">
            Navmesh
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/terrain_creation/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/terrain_creation/">
            地形创建
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/editor_shortcuts/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/editor_shortcuts/">
            编辑器快捷键
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/path_editing/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/path_editing/">
            编辑路径
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/entity_inspector/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/entity_inspector/">
            Entity Inspector
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/nav_mesh_inspector/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/nav_mesh_inspector/">
            导航网格查看器
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/alignment_and_snapping/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/alignment_and_snapping/">
            Alignment and Snapping Tools
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/prt/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/prt/">
            Precomputed Radiance Transfer - GI System
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/level_system/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/level_system/">
            Scene Level System
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/terrain_mesh_blend/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/terrain_mesh_blend/">
            地形网格混合系统
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/mass_selection/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/mass_selection/">
            群体选择
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/terrain_resize/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/terrain_resize/">
            调整地形大小
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/distance_tool/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/distance_tool/">
            距离工具
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/editor/resource-editors/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/editor/resource-editors/">资源编辑器</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/editor/resource-editors/material_editor/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/material_editor/">
            Material Editor
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/skeleton_editor/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/skeleton_editor/">
            Skeleton Editor
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/cloth_simulation/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/cloth_simulation/">
            Cloth Simulation
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/model_viewer/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/model_viewer/">
            Model Viewer
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/meta_mesh_editor/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/meta_mesh_editor/">
            元模型编辑器
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/mipmap_editor/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/mipmap_editor/">
            纹理编辑器
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/asset-management/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/asset-management/">资产管理</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/asset-management/quickguide_create_a_mod/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/quickguide_create_a_mod/">
            创建一个Mod - 快速入门
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/faq/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/faq/">
            常见问题解答
          </a>
        </div>
    </li>
    <li data-nav-id="/zh_cn/asset-management/asset-browser/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/asset-management/asset-browser/">资产浏览器</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/asset-management/asset-browser/filterqueries/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-browser/filterqueries/">
            过滤器查询
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/asset-management/asset-types/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/asset-management/asset-types/">资产类型</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/asset-management/asset-types/animations/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/animations/">
            Animations
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/asset_naming_conventions/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/asset_naming_conventions/">
            Naming Conventions
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/path/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/path/">
            Paths
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/skeletons/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/skeletons/">
            Skeletons
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/prefabs/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/prefabs/">
            实体及预制件
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/materials/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/materials/">
            材质
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/overriding_assets/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/overriding_assets/">
            添加与覆盖资产
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/bodies/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/bodies/">
            物体
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/textures/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/textures/">
            纹理
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/meshes/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/meshes/">
            网格
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/scripts/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/scripts/">
            脚本
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/overriding_scenes_prefabs/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/overriding_scenes_prefabs/">
            覆盖场景和预制件
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/playing-sounds/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/playing-sounds/">音乐</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/playing-sounds/adding-custom-sounds/" class="dd-item">
        <div>
          <a href="/zh_cn/playing-sounds/adding-custom-sounds/">
            给你的Mod添加音乐
          </a>
        </div>
    </li>
        </ul>
    </li>




    </ul>
<select id="select-language" onchange="location = this.value;">
	
	
	
	  
	  
	    
	      
	        <option id="en" value="/authoring-mission-scenes/script-components/bannerlord_destructible_component/">English</option>
	      
	    
	  
	    
	  
	
	  
	  
	    
	  
	    
	      
	        <option id="zh_cn" value="/zh_cn/authoring-mission-scenes/script-components/bannerlord_destructible_component/" selected>简体中文</option>
	      
	    
	  
	
</select>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation: 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/zh_cn/bestpractices/" >
   Best Practices</option>
    <option value="/zh_cn/authoring-mission-scenes/" >
   编辑任务场景</option> 
      <option value="/zh_cn/authoring-mission-scenes/villages/" >- What Makes a Village Scene</option>
      <option value="/zh_cn/authoring-mission-scenes/tactical_positions/" >- 行动的战术位置</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/bannerlord_destructible_component/"  selected>- Destructible Component</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/scene_barrier_builder/" >- Scene Barrier Builder</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/scene_spawn_points_guide/" >- Scene Spawn Point Guide</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/spawn_point_debug_tool/" >- 出生点 Debug 工具</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/callbacks/" >- 脚本组件回调函数</option>
  
    <option value="/zh_cn/editor/" >
   编辑器</option>
    <option value="/zh_cn/asset-management/" >
   资产管理</option>
    <option value="/zh_cn/playing-sounds/" >
   音乐</option>



        </select>
      </center>
      <center>Language: 
        
<select id="select-language" onchange="location = this.value;">
	
	
	
	  
	  
	    
	      
	        <option id="en" value="/authoring-mission-scenes/script-components/bannerlord_destructible_component/">English</option>
	      
	    
	  
	    
	  
	
	  
	  
	    
	  
	    
	      
	        <option id="zh_cn" value="/zh_cn/authoring-mission-scenes/script-components/bannerlord_destructible_component/" selected>简体中文</option>
	      
	    
	  
	
</select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "http:\/\/localhost:4444\/\/zh_cn";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>Destructible Component</h1>
    
    
    
    <p>The destruction system which gives artists a lot more freedom is explained below.</p>
<h2 id="characteristics">Characteristics</h2>
<p>It is a ScriptComponent which can be applied to any entity in a scene, as long as that entity has a collision body.</p>
<p>When not given any information, the script will just make the entity disappear after being destroyed. It will also re-appear when the mission resets.</p>
<p>The script can be used to destroy entities in one or more states, with optional sound, particles and dynamic objects spawning in each state.</p>
<p>Any existing prefab that has a DestructibleComponent script (Siege towers, gates, ballistas, ..) will continue to work even when you remove that script. It will only no longer be destructible.</p>
<p>One entity can have multiple DestructibleComponent scripts. E.g. the battering ram is destructible, but it also has individual rooftiles which can be destroyed too. Any damage that is applied to a child will also be applied to the parent(s).</p>
<p>Destroyed prefabs can always be tweaked and improved later without breaking any scenes, because they are not part of the intact entity (They are spawned at runtime).</p>
<table>
<thead>
<tr>
<th>Example Script of Siege Tower</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="/img/destructible_component/Script_Overview.png" alt=""></td>
</tr>
<tr>
<td><strong>DestructionStates</strong>, can be one or more prefabs. Seperated by &ldquo;,&rdquo; (comma).</td>
</tr>
<tr>
<td><strong>DestroyedByStoneOnly</strong>, True means that only projectiles from mangonels or trebuchets can damage this entity. False means anything can damage this entity.</td>
</tr>
<tr>
<td><strong>CanBeDestroyedInititally</strong>, defines if this entity can be destroyed already when loading the scene. This is controlled from the campaign map based on a destruction percentage from bombardements. This is generally only true on wall merlons. But it can also be used on aesthetic entities to make the scene look more destroyed from the start. Entities to be destroyed are selected randomly.</td>
</tr>
<tr>
<td><strong>MaxHitPoint</strong> are the starting hitpoints from this entity. Every time the mission resets, the entity will also have its current hitpoints set back to the MaxHitPoints.</td>
</tr>
<tr>
<td><strong>ReferenceEntityTag</strong> is an optional tag for when a DestructionState prefab has a different frame than its parent or to copy animation states. You can add an extra entity (under the entity with the DestructibleComponent script) with a correct frame and supply it with a reference tag, so that the spawned DestructionState prefab will use that frame. If there is no ReferenceEntity, the frame of the entity with the DestructibleComponent script will be used. Reference entity can also be used in special scenarios like a castlegate (opening/closing animations), to get the animation state from the reference entity and apply it to the newly spawned damaged entity.</td>
</tr>
<tr>
<td><strong>OriginalStateTag</strong> is only required when you have multiple DestructionStates. Usually, when an entity is destroyed, we hide the entity which has the script component applied, and spawn a new entity from the DestructionState (without a parent). But for some entities (like gates), we do not want to hide the entire entity because it has to keep functioning as a gate until it is fully destroyed. Using the OriginalStateTag, we will only hide the entity which has this tag applied, and the rest of the hierarchy (particles, standing points, ..) will still be visible. Any DestructibleComponent that has more than one destructionState will spawn the damaged prefabs as child entities.</td>
</tr>
<tr>
<td><strong>HeavyHitParticlesTag</strong> is a tag which can be applied to any child-entities that have a particle-system. These particles will burst once, when a certain amount of damage is taken in a single blow. This particle system is generally shared between all destruction states (It&rsquo;s not part of the entities that get hidden/spawned).</td>
</tr>
<tr>
<td><strong>HeavyHitParticlesThreshold</strong> is the minimum damage that is required to be taken in a single blow, to trigger particles with HeavyHitParticlesTag tag.</td>
</tr>
</tbody>
</table>
<h2 id="effects">Effects</h2>
<p>Generally, we try to keep the spawned prefabs as small as possible for performance reasons, and also to avoid entity duplication.
You have access to the following functionality to add effects:</p>
<ul>
<li>On the damaged prefab, when spawned: All particle systems on every entity in the hierarchy, will automatically be bursted once.</li>
<li>On the damaged prefab, when spawned: All dynamic bodies on every entity in the hierarchy, will automatically receive the impulse from the last hit that destroyed the previous state.</li>
<li>On the damaged prefab, when spawned: All other meshes on every entity in the hierarchy, will remain in place if they have no dynamic body-flag.</li>
<li>Part of the entity hierarchy: Heavy hit particles have to be shared between all destruction states, and are played whenever the DestructibleComponent takes <em>HeavyHitParticlesThreshold</em> damage.</li>
<li>You can play custom animations on DestructibleComponents that have a skeleton (e.g. castlegate being hit by battering ram). The animation progress will transfer to the newly spawned damaged entities.</li>
<li>You can add a script of type AmbientSoundEmitter on a damaged prefab and provide the sound event. It will automatically play when the entity is spawned.</li>
<li>Apart from using multiple states, you can also add multiple child entities with DestructibleComponents (e.g. battering ram rooftiles which are individually destructible). Keep in mind that any damage that is applied to a child DestructibleComponent is also applied to every parent in the hierarchy. Currently, we don&rsquo;t know the performance implications of having too many of these.</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="examples">Examples</h2>
<h3 id="example-1-wall-with-breakable-merlons">Example 1: Wall with breakable merlons</h3>
<p>For walls, we can only destroy the merlons and nothing else. They can only be damaged by mangonels/trebuchets and they will only take one hit before being destroyed.</p>
<table>
<thead>
<tr>
<th>Hierarchy of WallSegment</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="/img/destructible_component/Wall_Hierarchy_Edited.png" alt=""> This is what our scene hierarchy looks like for a single wall piece. European_castle_wall_a_l3 is an entity with script WallSegment. It does not care if it has destructible children or not. Every merlon is a different child-entity that has its own DestructibleComponent script. Once they are destroyed, they all spawn the same destroyed prefab. Every merlon has a debris_holder entity, which is an empty entity. It just hold a ReferenceEntityTag tag, and the correct frame to spawn the destroyed prefab from (Important because of mesh bending: Location and rotation may change compared to the parent).</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Script example of a single merlon</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="/img/destructible_component/Wall_Script.png" alt=""> Every merlon has the exact same script. They will all spawn the &ldquo;debris&rdquo; prefab when destroyed. We decided to make them destroy after a single hit from a mangonel, so they have very low hitpoints. DestroyedByStoneOnly makes them ignore damage from all other weapons (arrows, swords, axes, ..). Because of CanBeDestroyedInititally, these merlons have a chance to already be broken when entering the mission. The merlons need a ReferenceEntity entity to determine the spawn frame for the broken prefabs.</td>
</tr>
</tbody>
</table>
<p><strong>Origin of wall and merlon pieces</strong></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="/img/destructible_component/Wall_Origin_Merlon_Hierarchy.png" alt=""></td>
<td><img src="/img/destructible_component/Wall_Origin_Merlon.png" alt=""> Each merlon is a unique mesh, which has its origin point at the bottom of the wall (same as the wall).</td>
</tr>
<tr>
<td><img src="/img/destructible_component/Wall_Origin_Debris_Hierarchy.png" alt=""></td>
<td><img src="/img/destructible_component/Wall_Origin_Debris.png" alt=""> Every merlon shares the same destroyed prefab, which has a local origin. debris_holder has a ReferenceEntityTag.</td>
</tr>
<tr>
<td><img src="/img/destructible_component/Debris_Hierarchy.png" alt=""></td>
<td><img src="/img/destructible_component/Debris.png" alt=""> Every child of the debris prefab is an entity with flag &ldquo;dynamic&rdquo; and has a collision body. When spawned, it will automatically receive the last impulse that the DestructibleComponent received when destroyed.</td>
</tr>
</tbody>
</table>
<h3 id="example-2-siege-barricade">Example 2: Siege Barricade</h3>
<p>Siege barricades are very simple objects. They are static entities and their only function is to block incoming projectiles. However, they can be destroyed in multiple stages. Each stage looking more destroyed than the one before.</p>
<table>
<thead>
<tr>
<th>The different destruction states of a siege barricade</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="/img/destructible_component/SiegeBarricade_States.png" alt=""> Currently, the different states do not have any special particles or dynamic entities, but they can easily be added later on. Entities with the &ldquo;dynamic&rdquo; body flag, and particle systems will automatically trigger when spawned.</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<table>
<thead>
<tr>
<th>Hierarchy of siege barricade in scene</th>
<th>Siege Barricade script component</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="/img/destructible_component/SiegeBarricade_Hierarchy_Edited.png" alt=""></td>
<td><img src="/img/destructible_component/SiegeBarricade_Script.png" alt=""></td>
</tr>
</tbody>
</table>
<p>siege_barricade_a is an empty parent. It just holds the script. siege_barricade_a_state1 is the actual mesh + body and has the &ldquo;original_state&rdquo; tag. When the barricade takes enough damage, siege_barricade_a_state1 will be made invisible, the next damaged prefab will be spawned and added to siege_barricade_a as a child. This is important because the DestructibleComponent needs to be informed of hits, and it can only do that if it has a (visible) collision body on itself or on a child.</p>
<p>the last state (state_5 in this case) will be spawned when the entity has 0 health (fully destroyed). The other ones will be used in between MaxHitPoints and 0.</p>
<p>When the mission is reset (Health is reset to MaxHitPoint), the original entity (entity with tag &ldquo;original_state&rdquo;) will be made visible again.</p>
<p>Every DestructionState prefab has the same origin and rotation, so we don&rsquo;t have to use a ReferenceEntity.</p>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/zh_cn/authoring-mission-scenes/tactical_positions/" title="行动的战术位置"> <i class="fa fa-chevron-left"></i><label>行动的战术位置</label></a>
    <a class="nav nav-next" href="/zh_cn/authoring-mission-scenes/script-components/scene_barrier_builder/" title="Scene Barrier Builder" style="margin-right: 0px;"><label>Scene Barrier Builder</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    

    
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    <div style="text-align:center">
	<footer>
		&copy; 2005-2020 TaleWorlds Entertainment. All rights reserved.
	</footer> 
</div>
  </body>
</html>