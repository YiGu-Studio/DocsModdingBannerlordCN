<!DOCTYPE html>
<html>
  <head>
    <title>Taleworlds Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2020-11-30T02:10:14 UTC">
<title>脚本组件回调函数 :: Taleworlds Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "http:\/\/localhost:4444\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/zh_cn/authoring-mission-scenes/script-components/callbacks/">
    
      <header>
  <div class="logo">
    
	
  
    <p><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>

  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/zh_cn/" class="dd-item">
          <a href="/zh_cn/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/zh_cn/bestpractices/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/bestpractices/">Best Practices</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/bestpractices/scene_performance_guide/" class="dd-item">
        <div>
          <a href="/zh_cn/bestpractices/scene_performance_guide/">
            Scene Performance Guide
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/authoring-mission-scenes/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/zh_cn/authoring-mission-scenes/">编辑任务场景</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/villages/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/villages/">
            What Makes a Village Scene
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/tactical_positions/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/tactical_positions/">
            行动的战术位置
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/bannerlord_destructible_component/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/bannerlord_destructible_component/">
            Destructible Component
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/scene_barrier_builder/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/scene_barrier_builder/">
            Scene Barrier Builder
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/scene_spawn_points_guide/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/scene_spawn_points_guide/">
            Scene Spawn Point Guide
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/spawn_point_debug_tool/" class="dd-item">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/spawn_point_debug_tool/">
            出生点 Debug 工具
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/authoring-mission-scenes/script-components/callbacks/" class="dd-item active">
        <div>
          <a href="/zh_cn/authoring-mission-scenes/script-components/callbacks/">
            脚本组件回调函数
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/editor/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/editor/">编辑器</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/zh_cn/editor/scene-editor/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/editor/scene-editor/">场景编辑器</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/editor/scene-editor/creating_entity/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/creating_entity/">
            Creating Entity
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/nav_mesh/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/nav_mesh/">
            Navmesh
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/terrain_creation/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/terrain_creation/">
            地形创建
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/editor_shortcuts/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/editor_shortcuts/">
            编辑器快捷键
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/path_editing/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/path_editing/">
            编辑路径
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/entity_inspector/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/entity_inspector/">
            Entity Inspector
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/nav_mesh_inspector/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/nav_mesh_inspector/">
            导航网格查看器
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/alignment_and_snapping/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/alignment_and_snapping/">
            Alignment and Snapping Tools
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/prt/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/prt/">
            Precomputed Radiance Transfer - GI System
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/level_system/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/level_system/">
            Scene Level System
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/terrain_mesh_blend/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/terrain_mesh_blend/">
            地形网格混合系统
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/mass_selection/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/mass_selection/">
            群体选择
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/terrain_resize/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/terrain_resize/">
            调整地形大小
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/scene-editor/distance_tool/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/scene-editor/distance_tool/">
            距离工具
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/editor/resource-editors/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/editor/resource-editors/">资源编辑器</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/editor/resource-editors/material_editor/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/material_editor/">
            Material Editor
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/skeleton_editor/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/skeleton_editor/">
            Skeleton Editor
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/cloth_simulation/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/cloth_simulation/">
            Cloth Simulation
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/model_viewer/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/model_viewer/">
            Model Viewer
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/meta_mesh_editor/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/meta_mesh_editor/">
            元模型编辑器
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/editor/resource-editors/mipmap_editor/" class="dd-item">
        <div>
          <a href="/zh_cn/editor/resource-editors/mipmap_editor/">
            纹理编辑器
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/asset-management/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/asset-management/">资产管理</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/asset-management/quickguide_create_a_mod/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/quickguide_create_a_mod/">
            创建一个Mod - 快速入门
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/faq/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/faq/">
            常见问题解答
          </a>
        </div>
    </li>
    <li data-nav-id="/zh_cn/asset-management/asset-browser/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/asset-management/asset-browser/">资产浏览器</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/asset-management/asset-browser/filterqueries/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-browser/filterqueries/">
            过滤器查询
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/asset-management/asset-types/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/asset-management/asset-types/">资产类型</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/asset-management/asset-types/animations/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/animations/">
            Animations
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/asset_naming_conventions/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/asset_naming_conventions/">
            Naming Conventions
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/path/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/path/">
            Paths
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/skeletons/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/skeletons/">
            Skeletons
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/prefabs/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/prefabs/">
            实体及预制件
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/materials/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/materials/">
            材质
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/overriding_assets/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/overriding_assets/">
            添加与覆盖资产
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/bodies/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/bodies/">
            物体
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/textures/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/textures/">
            纹理
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/meshes/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/meshes/">
            网格
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/scripts/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/scripts/">
            脚本
          </a>
        </div>
    </li>
      <li data-nav-id="/zh_cn/asset-management/asset-types/overriding_scenes_prefabs/" class="dd-item">
        <div>
          <a href="/zh_cn/asset-management/asset-types/overriding_scenes_prefabs/">
            覆盖场景和预制件
          </a>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/zh_cn/playing-sounds/" class="dd-item haschildren
        ">
      <div>
      <a href="/zh_cn/playing-sounds/">音乐</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/zh_cn/playing-sounds/adding-custom-sounds/" class="dd-item">
        <div>
          <a href="/zh_cn/playing-sounds/adding-custom-sounds/">
            给你的Mod添加音乐
          </a>
        </div>
    </li>
        </ul>
    </li>




    </ul>
<select id="select-language" onchange="location = this.value;">
	
	
	
	  
	  
	    
	      
	        <option id="en" value="/authoring-mission-scenes/script-components/callbacks/">English</option>
	      
	    
	  
	    
	  
	
	  
	  
	    
	  
	    
	      
	        <option id="zh_cn" value="/zh_cn/authoring-mission-scenes/script-components/callbacks/" selected>简体中文</option>
	      
	    
	  
	
</select>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation: 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/zh_cn/bestpractices/" >
   Best Practices</option>
    <option value="/zh_cn/authoring-mission-scenes/" >
   编辑任务场景</option> 
      <option value="/zh_cn/authoring-mission-scenes/villages/" >- What Makes a Village Scene</option>
      <option value="/zh_cn/authoring-mission-scenes/tactical_positions/" >- 行动的战术位置</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/bannerlord_destructible_component/" >- Destructible Component</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/scene_barrier_builder/" >- Scene Barrier Builder</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/scene_spawn_points_guide/" >- Scene Spawn Point Guide</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/spawn_point_debug_tool/" >- 出生点 Debug 工具</option>
      <option value="/zh_cn/authoring-mission-scenes/script-components/callbacks/"  selected>- 脚本组件回调函数</option>
  
    <option value="/zh_cn/editor/" >
   编辑器</option>
    <option value="/zh_cn/asset-management/" >
   资产管理</option>
    <option value="/zh_cn/playing-sounds/" >
   音乐</option>



        </select>
      </center>
      <center>Language: 
        
<select id="select-language" onchange="location = this.value;">
	
	
	
	  
	  
	    
	      
	        <option id="en" value="/authoring-mission-scenes/script-components/callbacks/">English</option>
	      
	    
	  
	    
	  
	
	  
	  
	    
	  
	    
	      
	        <option id="zh_cn" value="/zh_cn/authoring-mission-scenes/script-components/callbacks/" selected>简体中文</option>
	      
	    
	  
	
</select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "http:\/\/localhost:4444\/\/zh_cn";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>脚本组件回调函数</h1>
    
    
    
    <p>以下为脚本组件 (Script Components) 的回调函数 (Callbacks)。</p>
<h4 id="构造函数-constructor">构造函数 (Constructor)</h4>
<p>在构造函数中，需要指定一些公共变量 (Public Variables) 的默认值（变量可能会被场景设计师修改）。在构造函数中，脚本组件是不会指定到一个特定的实体或者场景的。同时，你不应该在构造函数中写任何有副作用 (Side Effect) 的逻辑代码，因为即使创建了，脚本组件也可能会在场景打开时，因为关卡系统 (Level System) 的升级而被删除。</p>
<h4 id="on-pre-init">On Pre Init</h4>
<p>当一个脚本组件被指定一个场景中的实体时，调用本函数。当你回调该函数时，你要确定用户在脚本中定义的变量都是设定好的。但是，其他实体的脚本组件可能还没有指定。所以，在 pre init 函数中，不应该有任何需要调用其他脚本组件的逻辑代码。例如，ManagedObject 在 pre-init 函数中指定它自己到当前任务实例中的对象数列 (managed object array) 中。</p>
<h4 id="on-init">On Init</h4>
<p>这个函数在任务载入的时候被调用，函数会初始化脚本组件中的所有实体。你可以在此回调函数中添加任何类型的逻辑代码。运行实例化脚本 (Run Time Instantiated Scripts) 也会调用该函数。</p>
<h4 id="on-editor-init">On Editor Init</h4>
<p>编辑器版本的 On Init 函数。这个函数是在场景在编辑器中加载时候调用的。值得注意的是，在编辑器中没有任务或者游戏状态 (game state)。</p>
<h4 id="on-tick">On Tick</h4>
<p>在同一个线程下，每一个脚本组件的任务的每一帧都会调用这个函数。</p>
<h4 id="on-editor-tick">On Editor Tick</h4>
<p>编辑器版本的 On Tick 函数。</p>
<h4 id="is-only-visual">Is Only Visual</h4>
<p>如果你的脚本组件是仅供查看，即不会在专用服务器 (dedicated server) 上运行任何逻辑代码，那么你想要在函数中设置返回值为 真 (True)。这个可以确保这个类型的脚本不会在服务器上运行。</p>
<h4 id="on-editor-variable-changed">On Editor Variable Changed</h4>
<p>在编辑器中，当一个脚本组件中的公共变量被用户修改的时候，调用该函数。当设计者需要在编辑场景中得到即时反馈的时候，该函数可以被用于任何视觉和逻辑上的状态改变。</p>
<h4 id="onremoved">OnRemoved</h4>
<p>当实体或者是脚本组件被移除的时候，调用该函数。当你有一些分配好的对象存在其他地方的时候（例如存在静态容器中），你可以用这个回调函数来确保他们不会出现内存泄漏的问题。</p>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/zh_cn/authoring-mission-scenes/script-components/spawn_point_debug_tool/" title="出生点 Debug 工具"> <i class="fa fa-chevron-left"></i><label>出生点 Debug 工具</label></a>
    <a class="nav nav-next" href="/zh_cn/editor/" title="编辑器" style="margin-right: 0px;"><label>编辑器</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    

    
  </div>


	<div>


  
    
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    <div style="text-align:center">
	<footer>
		&copy; 2005-2020 TaleWorlds Entertainment. All rights reserved.
	</footer> 
</div>
  </body>
</html>